# Jupiter → Bybit
  
## 变量定义

- **U**：Jupiter 端初始 USDT 数量
- **J**：Jupiter 上代币价格（USDT/枚）
- **B**：Bybit 上代币价格（USDT/枚）
- **sᴶ**：Jupiter 端滑点容忍度（小数形式）
- **sᴮ**：Bybit 端预期滑点（小数形式）
- **gas**：总 Gas 成本（固定 0.002 USDT）
- **fee_bybit**：Bybit 卖出手续费（0.001）


## 交易流程

1. **在 Jupiter 买入**

实际获得代币数量：
$$t = \frac{U - gas}{J(1 + sᴶ)}$$


2. **在 Bybit 卖出**

考虑滑点后的实际卖出价格：

$$B_{\text{eff}} = B(1 - sᴮ)$$

卖出后获得的 USDT 数量：

$$\text{proceeds} = t \times B_{\text{eff}} \times (1 - fee_{\text{bybit}})$$
  

## 无亏损条件（含双滑点）

  

要求最终获得的 USDT 不低于初始投入：


$$0.999(1 - sᴮ)\frac{B}{J(1 + sᴶ)}(U - 0.002) - U \ge 0$$

整理后得到：


$$B \ge J(1 + sᴶ) \cdot \frac{U}{0.999(1 - sᴮ)(U - 0.002)}$$


或等价的价差阈值形式：



$$B - J \ge J \left[(1 + sᴶ)\frac{U}{0.999(1 - sᴮ)(U - 0.002)} - 1\right]$$

  

## Jupiter 滑点上限推导

  

在盈亏平衡点上：

$$0.999(1 - sᴮ)\frac{B}{J(1 + sᴶ)}(U - 0.002) - U = 0$$

  

解得：

$$sᴶ_{\text{max}} = \frac{0.999(1 - sᴮ)B(U - 0.002)}{U J} - 1$$



## 预期利润计算

套利的预期利润为最终获得的 USDT 减去初始投入：

$$\text{profit} = t \times B_{\text{eff}} \times (1 - fee_{\text{bybit}}) - U$$

将各项代入：

$$\text{profit} = \frac{U - 0.002}{J(1 + sᴶ)} \times B(1 - sᴮ) \times 0.999 - U$$

整理后：

$$\text{profit} = \frac{0.999(1 - sᴮ)B(U - 0.002)}{J(1 + sᴶ)} - U$$